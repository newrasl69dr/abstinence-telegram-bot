import json
import datetime
import os
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes
from apscheduler.schedulers.asyncio import AsyncIOScheduler

# ğŸ” Ğ–ĞĞ¡Ğ¢ĞšĞ Ğ—ĞĞ”ĞĞĞĞ«Ğ• Ğ”ĞĞĞĞ«Ğ•
TOKEN = "7970596881:AAGMETGS2Rvcp5PhGvo57l09ODbbBQR19aU"
USER_ID = 918342062

if not TOKEN or not USER_ID:
    raise ValueError("BOT_TOKEN Ğ¸ USER_ID Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ğ½Ñ‹ ĞºĞ°Ğº Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ ÑÑ€ĞµĞ´Ñ‹.")

USER_ID = int(USER_ID)

DATA_FILE = "data.json"

MOTIVATIONS = [
    "Ğ¢Ñ‹ ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ, Ñ‡ĞµĞ¼ ĞºĞ°Ğ¶ĞµÑ‚ÑÑ.",
    "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ â€” Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑˆĞ°Ğ½Ñ ÑÑ‚Ğ°Ñ‚ÑŒ Ğ»ÑƒÑ‡ÑˆĞµ.",
    "Ğ¡Ğ¸Ğ»Ğ° Ğ² Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½ÑÑ‚Ğ²Ğµ.",
    "Ğ¢Ñ‹ Ğ½Ğµ Ğ¾Ğ´Ğ¸Ğ½ Ğ² ÑÑ‚Ğ¾Ğ¼ Ğ¿ÑƒÑ‚Ğ¸.",
    "Ğ¡Ñ€Ñ‹Ğ² â€” ÑÑ‚Ğ¾ Ğ½Ğµ Ğ¿Ğ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ° ÑƒÑ€Ğ¾Ğº.",
    "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ â€” Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ½Ğµ ÑĞ´Ğ°Ğ²Ğ°Ñ‚ÑŒÑÑ.",
    "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑˆĞ°Ğ³ â€” Ğ¿Ğ¾Ğ±ĞµĞ´Ğ°.",
    "Ğ¢Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑˆÑŒ ÑĞ²Ğ¾ĞµĞ¹ Ğ¶Ğ¸Ğ·Ğ½ÑŒÑ.",
    "Ğ¢Ğ²Ğ¾Ñ ÑĞ¸Ğ»Ğ° Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.",
    "Ğ¢Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑˆÑŒ Ğ²ÑÑ‘, ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑĞ´Ğ°ÑˆÑŒÑÑ.",
    "ĞĞ¸Ñ‡Ñ‚Ğ¾ Ğ½Ğµ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ñ‚Ğ²Ğ¾ĞµĞ¹ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸, ĞºÑ€Ğ¾Ğ¼Ğµ Ğ¼ĞµÑ‡Ñ‚Ñ‹.",
    "Ğ’Ğ¾Ğ·Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ â€” Ğ¿ÑƒÑ‚ÑŒ Ğº ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğµ.",
    "ĞŸĞ¾Ğ±ĞµĞ´Ğ° â€” ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°Ñ‚ÑŒ Ğ¸Ğ´Ñ‚Ğ¸.",
    "Ğ¡Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ â€” ÑÑ‚Ğ¾ ÑĞ¸Ğ»Ğ°.",
    "ĞœĞ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğµ ÑˆĞ°Ğ³Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ñ‹.",
    "Ğ¢Ñ‹ Ğ·Ğ°ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑˆÑŒ Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾.",
    "ĞŸÑ€Ğ¾ÑˆĞ»Ğ¾Ğµ Ğ½Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ Ñ‚ĞµĞ±Ñ.",
    "Ğ¢Ñ‹ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑˆÑŒ Ğ±Ñ‹Ñ‚ÑŒ Ğ»ÑƒÑ‡ÑˆĞµĞ¹ Ğ²ĞµÑ€ÑĞ¸ĞµĞ¹ ÑĞµĞ±Ñ.",
    "ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾ â€” Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚.",
    "ĞĞ°ÑÑ‚Ğ¾ÑÑ‰Ğ°Ñ ÑĞ¸Ğ»Ğ° â€” Ğ² ÑĞ°Ğ¼Ğ¾Ğ¾Ğ±Ğ»Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¸.",
    "Ğ¢Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ñ€ĞµĞ¾Ğ´Ğ¾Ğ»ĞµĞ» Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ğµ â€” Ğ½Ğµ Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°Ğ¹ÑÑ.",
    "Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ñ‚ĞµĞ±Ñ â€” Ğ¾Ğ³Ñ€Ğ¾Ğ¼Ğ½Ğ°Ñ ÑĞ¸Ğ»Ğ°.",
    "Ğ¢Ñ‹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾ ÑĞµĞ±Ñ.",
    "ĞĞ´Ğ¸Ğ½ Ğ´ĞµĞ½ÑŒ Ğ±ĞµĞ· ÑÑ€Ñ‹Ğ²Ğ° â€” ÑÑ‚Ğ¾ ÑƒĞ¶Ğµ ÑƒÑĞ¿ĞµÑ….",
    "ĞœĞ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¸ ÑƒÑ…Ğ¾Ğ´Ğ¸Ñ‚. Ğ”Ğ¸ÑÑ†Ğ¸Ğ¿Ğ»Ğ¸Ğ½Ğ° â€” ĞºĞ»ÑÑ‡.",
    "Ğ¢Ñ‹ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ğ°ĞµÑˆÑŒ, Ğ¿Ğ¾ĞºĞ° Ğ½Ğµ ÑĞ´Ğ°ÑˆÑŒÑÑ.",
    "ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ğ½Ğ°Ğ´ ÑĞ¾Ğ±Ğ¾Ğ¹ â€” ÑÑ‚Ğ¾ ÑÑƒĞ¿ĞµÑ€ÑĞ¸Ğ»Ğ°.",
    "Ğ¢Ñ‹ Ğ½Ğ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ¿ÑƒÑ‚Ğ¸.",
    "Ğ¡Ğ¸Ğ»Ğ° â€” ÑÑ‚Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.",
    "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ±ĞµĞ· ÑÑ€Ñ‹Ğ²Ğ° â€” ĞºĞ¸Ñ€Ğ¿Ğ¸Ñ‡ Ğ² ÑÑ‚ĞµĞ½Ğµ ÑƒÑĞ¿ĞµÑ…Ğ°.",
    "Ğ¢Ñ‹ Ğ±Ğ¾Ñ€ĞµÑˆÑŒÑÑ Ğ·Ğ° ÑĞ°Ğ¼Ğ¾Ğ³Ğ¾ ÑĞµĞ±Ñ.",
    "Ğ¢Ñ‹ Ğ·Ğ°ÑĞ»ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑˆÑŒ ÑĞ¿Ğ¾ĞºĞ¾Ğ¹ÑÑ‚Ğ²Ğ¸Ñ.",
    "Ğ¢Ğ²Ğ¾Ñ Ğ¶Ğ¸Ğ·Ğ½ÑŒ â€” Ğ² Ñ‚Ğ²Ğ¾Ğ¸Ñ… Ñ€ÑƒĞºĞ°Ñ….",
    "ĞŸĞ¾Ğ±ĞµĞ´Ğ° â€” Ğ² Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸.",
    "ĞĞ´Ğ¸Ğ½ Ğ´ĞµĞ½ÑŒ Ğ·Ğ° Ñ€Ğ°Ğ· â€” Ğ¸ Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸ÑˆÑŒ.",
    "Ğ¢Ñ‹ ÑƒĞ¶Ğµ Ğ´ĞµĞ»Ğ°ĞµÑˆÑŒ Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾Ğµ.",
    "Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ‚Ñ‹ ÑÑ‚Ğ°Ğ» ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ, Ñ‡ĞµĞ¼ Ğ²Ñ‡ĞµÑ€Ğ°.",
    "ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ â€” Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ.",
    "Ğ¡Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ â€” ÑÑ‚Ğ¾ Ğ»ÑĞ±Ğ¾Ğ²ÑŒ Ğº ÑĞµĞ±Ğµ.",
    "Ğ¢Ñ‹ Ñ…Ğ¾Ğ·ÑĞ¸Ğ½ ÑĞ²Ğ¾ĞµĞ¹ Ğ²Ğ¾Ğ»Ğ¸.",
    "Ğ‘ÑƒĞ´ÑŒ Ñ‚ĞµÑ€Ğ¿ĞµĞ»Ğ¸Ğ² â€” Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ±ÑƒĞ´ĞµÑ‚.",
    "Ğ¡Ğ¸Ğ»Ğ° Ñ€Ğ°ÑÑ‚Ñ‘Ñ‚ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¾Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ğµ.",
    "Ğ¢Ñ‹ ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒ, ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑĞ´Ğ°Ñ‘ÑˆÑŒÑÑ.",
    "Ğ¢Ñ‹ Ğ¶Ğ¸Ğ²Ñ‘ÑˆÑŒ Ñ€Ğ°Ğ´Ğ¸ ÑĞ²Ğ¾ĞµĞ¹ Ñ†ĞµĞ»Ğ¸.",
    "ĞœĞ¸Ñ€ Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ñ‚ĞµĞ¼, ĞºÑ‚Ğ¾ ÑĞµĞ±Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµÑ‚.",
    "Ğ¢Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸ÑˆÑŒ, ĞµÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸ÑˆÑŒ.",
    "Ğ–Ğ¸Ğ·Ğ½ÑŒ Ğ±ĞµĞ· Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ â€” Ğ¶Ğ¸Ğ·Ğ½ÑŒ Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰Ğ°Ñ.",
    "ĞĞµ Ğ´Ğ°Ğ²Ğ°Ğ¹ ÑĞ»Ğ°Ğ±Ğ¾ÑÑ‚Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ.",
    "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ â€” Ğ²ĞºĞ»Ğ°Ğ´ Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ.",
    "Ğ¢Ñ‹ Ğ½Ğµ Ğ¾Ğ´Ğ¸Ğ½. Ğ’ĞµÑ€ÑŒ Ğ² ÑĞµĞ±Ñ.",
    "Ğ¢Ñ‹ ÑÑ‚Ğ°Ğ» ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ, Ñ‡ĞµĞ¼ Ğ´ÑƒĞ¼Ğ°ĞµÑˆÑŒ.",
    "Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ â€” Ğ² Ñ‚Ğ²Ğ¾Ğ¸Ñ… Ñ€ÑƒĞºĞ°Ñ….",
    "Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾? Ğ—Ğ½Ğ°Ñ‡Ğ¸Ñ‚, Ñ‚Ñ‹ Ñ€Ğ°ÑÑ‚Ñ‘ÑˆÑŒ.",
    "ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Â«Ğ½ĞµÑ‚Â» Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ñ‚ĞµĞ±Ñ ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ.",
    "ĞĞ°ÑÑ‚Ğ¾ÑÑ‰ĞµĞµ Â«Ğ´Ğ°Â» â€” ÑÑ‚Ğ¾ Ğ¾Ñ‚ĞºĞ°Ğ· Ğ¾Ñ‚ Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… ÑƒĞ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¸Ğ¹.",
    "Ğ¢Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘ÑˆÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ÑĞµĞ±Ñ.",
    "Ğ–Ğ¸Ğ·Ğ½ÑŒ Ğ±ĞµĞ· ÑÑ€Ñ‹Ğ²Ğ¾Ğ² â€” ÑÑ‚Ğ¾ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ.",
    "Ğ’ÑÑ‚Ğ°Ğ²Ğ°Ğ¹ Ğ¸ Ğ¸Ğ´Ğ¸ Ğ´Ğ°Ğ»ÑŒÑˆĞµ.",
    "Ğ¡ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¼ Ğ´Ğ½Ñ‘Ğ¼ â€” Ğ±Ğ»Ğ¸Ğ¶Ğµ Ğº ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğµ.",
    "Ğ¢Ñ‹ Ğ±Ğ¾Ñ€ĞµÑˆÑŒÑÑ â€” Ñ‚Ñ‹ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸ÑˆÑŒ.",
    "Ğ Ğ°Ğ´Ğ¸ ÑĞµĞ±Ñ. Ğ Ğ°Ğ´Ğ¸ Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ³Ğ¾.",
    "ĞĞ´Ğ¸Ğ½ Ğ´ĞµĞ½ÑŒ Ğ±ĞµĞ· ÑÑ€Ñ‹Ğ²Ğ° â€” ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ´Ğ²Ğ¸Ğ³.",
    "Ğ¢Ñ‹ â€” Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ³ĞµÑ€Ğ¾Ğ¹ ÑĞ²Ğ¾ĞµĞ¹ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸.",
    "Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ â€” ÑÑ‚Ğ¾ Ñ‚Ğ¾Ñ‚, ĞºÑ‚Ğ¾ Ğ½Ğµ ÑĞ´Ğ°Ñ‘Ñ‚ÑÑ.",
    "Ğ¢Ñ‹ ÑĞ¸Ğ»ÑŒĞ½ĞµĞµ Ğ¿Ñ€Ğ¸Ğ²Ñ‹Ñ‡ĞµĞº.",
    "Ğ¢Ñ‹ Ğ´ĞµÑ€Ğ¶Ğ¸ÑˆÑŒ ÑƒĞ´Ğ°Ñ€.",
    "ĞšĞ°Ğ¶Ğ´Ğ°Ñ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ° Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ Ñ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ°.",
    "Ğ¢Ğ²Ğ¾Ñ ÑĞ¸Ğ»Ğ° â€” Ğ² Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½ÑÑ‚Ğ²Ğµ.",
    "ĞĞµ ÑĞ´Ğ°Ğ²Ğ°Ğ¹ÑÑ. Ğ­Ñ‚Ğ¾ Ğ¿Ñ€Ğ¾Ğ¹Ğ´Ñ‘Ñ‚.",
    "ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ñ‚Ñ‹ Ğ´Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑˆÑŒ ÑĞ²Ğ¾Ñ ÑĞ¸Ğ»Ñƒ.",
    "Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ â€” Ğ²Ğ°Ğ¶Ğ½ĞµĞµ Ğ²ÑĞµĞ³Ğ¾.",
    "Ğ‘ÑƒĞ´ÑŒ Ñ‚ĞµĞ¼, ĞºĞµĞ¼ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ ÑÑ‚Ğ°Ñ‚ÑŒ."
]

def load_data():
    try:
        with open(DATA_FILE, "r") as f:
            return json.load(f)
    except:
        return {"start_date": None, "days": []}

def save_data(data):
    with open(DATA_FILE, "w") as f:
        json.dump(data, f, indent=2)

def get_day_number(start_date):
    today = datetime.date.today()
    delta = today - datetime.date.fromisoformat(start_date)
    return delta.days + 1

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if update.effective_user.id != USER_ID:
        return
    data = load_data()
    if not data["start_date"]:
        data["start_date"] = str(datetime.date.today())
        save_data(data)
        await update.message.reply_text("ğŸ“… ĞÑ‚ÑÑ‡Ñ‘Ñ‚ Ğ½Ğ°Ñ‡Ğ°Ñ‚ Ñ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ĞµĞ³Ğ¾ Ğ´Ğ½Ñ.")
    else:
        await update.message.reply_text("ğŸ“… ĞÑ‚ÑÑ‡Ñ‘Ñ‚ ÑƒĞ¶Ğµ Ğ½Ğ°Ñ‡Ğ°Ñ‚.")

async def handle_response(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if update.effective_user.id != USER_ID:
        return
    text = update.message.text
    today = str(datetime.date.today())
    data = load_data()
    data["days"].append({"date": today, "response": text})
    save_data(data)
    await update.message.reply_text("âœ… ĞÑ‚Ğ²ĞµÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½.")

# ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ bot Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
async def send_motivation(bot):
    message = random.choice(MOTIVATIONS)
    await bot.send_message(chat_id=USER_ID, text=f"ğŸ’ª {message}")

async def send_stat_request(bot):
    data = load_data()
    if not data["start_date"]:
        return
    day_number = get_day_number(data["start_date"])
    text = f"""ğŸ“… Ğ”ĞµĞ½ÑŒ: {day_number}
ğŸ§  Ğ¡Ñ€Ñ‹Ğ²: (Ğ´Ğ°/Ğ½ĞµÑ‚)
ğŸ› Ğ¡Ğ¾Ğ½ Ğ´Ğ¾ 23:30: (Ğ´Ğ°/Ğ½ĞµÑ‚)"""
    await bot.send_message(chat_id=USER_ID, text=text)

async def stats(update: Update, context: ContextTypes.DEFAULT_TYPE):
    if update.effective_user.id != USER_ID:
        return
    data = load_data()
    total = len(data["days"])
    no_fails = sum(1 for d in data["days"] if "Ğ½ĞµÑ‚" in d["response"].lower())
    week_data = [d for d in data["days"] if datetime.date.fromisoformat(d["date"]) >= datetime.date.today() - datetime.timedelta(days=7)]
    month_data = [d for d in data["days"] if datetime.date.fromisoformat(d["date"]).month == datetime.date.today().month]

    await update.message.reply_text(
        f"ğŸ“Š Ğ’ÑĞµĞ³Ğ¾ Ğ´Ğ½ĞµĞ¹: {total}\n"
        f"âœ… Ğ‘ĞµĞ· ÑÑ€Ñ‹Ğ²Ğ¾Ğ²: {no_fails}\n"
        f"ğŸ“† Ğ—Ğ° Ğ½ĞµĞ´ĞµĞ»Ñ: {len(week_data)}\n"
        f"ğŸ“… Ğ—Ğ° Ğ¼ĞµÑÑÑ†: {len(month_data)}"
    )

def main():
    app = Application.builder().token(TOKEN).build()
    scheduler = AsyncIOScheduler()
    scheduler.add_job(send_motivation, "cron", hour=19, minute=0, args=[app.bot])
    scheduler.add_job(send_stat_request, "cron", hour=23, minute=30, args=[app.bot])
    scheduler.start()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("stats", stats))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_response))

    app.run_polling()

if __name__ == "__main__":
    main()
